{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'ecommerce/css/orders.css' %}">
{% endblock %}
{% block title %}Order #{{ order.id }} - Eye Shopping{% endblock %}

{% block content %}
<div style="padding: 40px;">
    <div style="max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h1 style="color: #8e44ad; margin: 0;">Order #{{ order.id }}</h1>
            <span style="color: #777;">{{ order.created|date:"M d, Y" }}</span>
        </div>

        <div style="margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
            <h3 style="margin-bottom: 15px;">Shipping Information</h3>
            <p><strong>Name:</strong> {{ order.first_name }} {{ order.last_name }}</p>
            <p><strong>Email:</strong> {{ order.email }}</p>
            <p><strong>Address:</strong> {{ order.address }}, {{ order.city }}, {{ order.postal_code }}</p>
            <p><strong>Status:</strong> 
                {% if order.paid %}
                    <span style="color: green; font-weight: 600;">Paid</span>
                {% else %}
                    <span style="color: orange; font-weight: 600;">Pending</span>
                {% endif %}
            </p>
        </div>

        <h3 style="margin-bottom: 15px;">Items</h3>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f9f9f9;">
                    <th style="padding: 10px; text-align: left;">Product</th>
                    <th style="padding: 10px; text-align: right;">Price</th>
                    <th style="padding: 10px; text-align: center;">Qty</th>
                    <th style="padding: 10px; text-align: right;">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items.all %}
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #eee;">{{ item.product.name }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #eee; text-align: right;">${{ item.price }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #eee; text-align: center;">{{ item.quantity }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #eee; text-align: right;">${{ item.get_cost }}</td>
                </tr>
                {% endfor %}
                <tr>
                    <td colspan="3" style="padding: 15px; text-align: right; font-weight: 600;">Total Cost:</td>
                    <td style="padding: 15px; text-align: right; font-weight: 700; color: #8e44ad;">${{ order.get_total_cost }}</td>
                </tr>
            </tbody>
        </table>

        <div style="margin-top: 30px; text-align: center;">
            <a href="{% url 'order_history' %}" class="btn" style="background: #555;">&larr; Back to Orders</a>
        </div>
    </div>
</div>
{% endblock %}
